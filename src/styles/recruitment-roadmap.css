/* src/styles/recruitment-roadmap.css */

.recruitment-roadmap {
  padding: 0rem 1.5rem 0rem;
  background-color: #f8fafc;
  overflow: hidden;
}

.roadmap-container {
  /* max-width: var(--content-max-width); */
  max-height: 1000px;
  margin: 0 auto;
}

.roadmap-title {
  font-size: 3.25rem;
  font-weight: 700;
  color: #2563eb;
  margin-bottom: 2rem;
  text-align: left;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 0 3rem;
}

.desktop-roadmap .roadmap-title {
  position: absolute;
  left: 50%;
  transform: translateX(-42%) translateY(-60%);
  width: 100vw;
  max-width: var(--content-max-width);
  padding: 0 1.5rem;
  z-index: 10;
  margin-bottom: 0;
}

@media (min-width: 769px) {
  .roadmap-title br {
    display: none;
  }
}

/* --- Desktop Layout (SVG Road) --- */
.desktop-roadmap {
  display: block;
  position: relative;
  width: 130vw; /* Responsive zoom */
  min-width: 1440px; /* Prevent becoming too small on tablets if breakpoint isn't hit */
  height: auto;
  aspect-ratio: 2853 / 1535;
  margin: 0 auto;
  left: 50%;
  transform: translateX(-55%) translateY(5%);
  /* max-width: var(--content-max-width); */
}

@media (min-width: 1440px) {
  .desktop-roadmap {
    transform: translateX(-55%) translateY(0%);
  }

  .desktop-roadmap .roadmap-title {
    top: 6rem;
    transform: translateX(-42%) translateY(-80%);
  }
}

@media (min-width: 1920px) {
  .desktop-roadmap {
    transform: translateX(-55%) translateY(-11%);
  }

  .desktop-roadmap .roadmap-title {
    top: 6rem;
    transform: translateX(-42%) translateY(200%);
  }
}

@media (min-width: 2280px) {
  .desktop-roadmap {
    width: 110vw;
  }
}

.road-svg {
  width: 100%;
  height: 100%;
  display: block;
}

/* Dashed Line Adjustment */
.dashed-line-path {
  /* Desktop default behavior */
  transform: translate(25px, 308px);
}

.mobile-svg-container .dashed-line-path {
  /* Mobile specific overrides */
  transform: translate(0px, 8px);
}

/* STEPS */
.roadmap-step {
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  z-index: 20;
  max-width: 250px; /* Constrain text width */
  pointer-events: none; /* Let clicks pass through to potential interactives */
}

/* STEP CONTENT STYLING */
.step-icon {
  width: 120px;
  height: 120px;
  /* Option 1: White Clean Box */
  /* background: white;
  border-radius: 12px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); */
  color: #2563eb;
  /* Option 2: Transparent (uncomment if desired) */
  background: transparent; box-shadow: none;

  display: flex;
  align-items: center;
  justify-content: center;
  /* margin: 10px 0; */
  font-size: 0; /* Clear text spacing */
  transition: transform 0.3s ease;
  z-index: 2;
}

.step-icon svg {
  width: 140px;
  height: 140px;
}

.roadmap-step:hover .step-icon {
  transform: scale(1.1);
}

.step-content {
  padding: 0.5rem;
  border-radius: 8px;
  backdrop-filter: blur(4px);
}

.step-content h3 {
  font-size: 1.25rem;
  font-weight: 700;
  color: #2563eb;
  line-height: 1.4;
  margin: 0;
}

/* CONNECTING LINE */
.step-line {
  width: 2px;
  height: 160px; /* Increased length as requested */
  background-color: #BAE9F2;
  margin: 0 auto;
}

/* DOT ON ROAD */
.road-dot {
  position: absolute;
  width: 12px;
  height: 12px;
  background-color: #fff;
  border: 2px solid #2563eb;
  border-radius: 50%;
  z-index: 10;
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.5);
}

/* --- POSITIONS & LAYOUT VARIANTS --- */

/* ABOVE: Road -> Line -> Text -> Icon (Stack bottom-up visual? No, Flex Col) */
/* We want: Icon (Top), Text, Line (Bottom connecting to road) */
.roadmap-step.above {
  transform: translate(-50%, -100%);
  /* Ensure correct stacking order for 'Above' */
}
.roadmap-step.above .step-icon { order: 1; }
.roadmap-step.above .step-content { order: 2; }
.roadmap-step.above .step-line { order: 3; }
.roadmap-step.above .road-dot {
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
}

/* BELOW: Road -> Line -> Icon -> Text */
.roadmap-step.below {
  transform: translate(-50%, 0);
}
.roadmap-step.below .step-line { order: 1; }
.roadmap-step.below .step-icon { order: 2; }
.roadmap-step.below .step-content { order: 3; }
.roadmap-step.below .road-dot {
  top: -6px;
  left: 50%;
  transform: translateX(-50%);
}

/* ANIMATIONS */

/* Initial States (Hidden) */
.dashed-line-path {
  /* Use clip-path Animation like the background road to preserve dashed style */
  clip-path: inset(0 100% 0 0);
  /* Keep transform from previous edit */
  transform: translate(25px, 308px);
}

.road-bg-path {
  clip-path: inset(0 100% 0 0);
}

.roadmap-step .road-dot {
  opacity: 0;
  transform: translateX(-50%) scale(0);
}

.roadmap-step .step-line {
  transform: scaleY(0);
}

.roadmap-step .step-icon,
.roadmap-step .step-content {
  opacity: 0;
  transform: translateY(20px);
}

/* Trigger Animations when In View */
.recruitment-roadmap.in-view .dashed-line-path {
  animation: revealPath 2s linear forwards;
}

.recruitment-roadmap.in-view .road-bg-path {
  animation: revealPath 2s linear forwards;
}

.recruitment-roadmap.in-view .roadmap-step .road-dot {
  animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

.recruitment-roadmap.in-view .roadmap-step .step-line {
  animation: growLine 0.5s ease-out forwards;
}

.recruitment-roadmap.in-view .roadmap-step .step-icon,
.recruitment-roadmap.in-view .roadmap-step .step-content {
  animation: fadeSlide 0.5s ease-out forwards;
}

/* Animation Delays based on position on the path (Total 2s) */
/* s1 (~15%) -> 0.4s */
.recruitment-roadmap.in-view .s1 .road-dot { animation-delay: 0.4s; }
.recruitment-roadmap.in-view .s1 .step-line { animation-delay: 0.5s; }
.recruitment-roadmap.in-view .s1 .step-icon { animation-delay: 0.6s; }
.recruitment-roadmap.in-view .s1 .step-content { animation-delay: 0.7s; }

/* s2 (~35%) -> 0.8s */
.recruitment-roadmap.in-view .s2 .road-dot { animation-delay: 0.8s; }
.recruitment-roadmap.in-view .s2 .step-line { animation-delay: 0.9s; }
.recruitment-roadmap.in-view .s2 .step-icon { animation-delay: 1.0s; }
.recruitment-roadmap.in-view .s2 .step-content { animation-delay: 1.1s; }

/* s3 (~55%) -> 1.2s */
.recruitment-roadmap.in-view .s3 .road-dot { animation-delay: 1.2s; }
.recruitment-roadmap.in-view .s3 .step-line { animation-delay: 1.3s; }
.recruitment-roadmap.in-view .s3 .step-icon { animation-delay: 1.4s; }
.recruitment-roadmap.in-view .s3 .step-content { animation-delay: 1.5s; }

/* s4 (~75%) -> 1.6s */
.recruitment-roadmap.in-view .s4 .road-dot { animation-delay: 1.6s; }
.recruitment-roadmap.in-view .s4 .step-line { animation-delay: 1.7s; }
.recruitment-roadmap.in-view .s4 .step-icon { animation-delay: 1.8s; }
.recruitment-roadmap.in-view .s4 .step-content { animation-delay: 1.9s; }

/* s5 (~92%) -> 1.9s */
.recruitment-roadmap.in-view .s5 .road-dot { animation-delay: 1.9s; }
.recruitment-roadmap.in-view .s5 .step-line { animation-delay: 2.0s; }
.recruitment-roadmap.in-view .s5 .step-icon { animation-delay: 2.1s; }
.recruitment-roadmap.in-view .s5 .step-content { animation-delay: 2.2s; }


/* KEYFRAMES */
@keyframes drawPath {
  to { stroke-dashoffset: 0; }
}

@keyframes revealPath {
  to { clip-path: inset(0 0 0 0); }
}

@keyframes popIn {
  to { opacity: 1; transform: translateX(-50%) scale(1); }
}

@keyframes growLine {
  to { transform: scaleY(1); }
}

@keyframes fadeSlide {
  to { opacity: 1; transform: translateY(0); }
}

/* Transform Origins for Line Growth */
.roadmap-step.above .step-line { transform-origin: bottom; }
.roadmap-step.below .step-line { transform-origin: top; }


/* POSITIONS (Keep original positioning) */
.s1 { left: 32.84%; top: 68.13%; }
.s2 { left: 46.90%; top: 51.07%; }
.s3 { left: 60%; top: 46.3%; }
.s4 { left: 72.00%; top: 42.8%; }
.s5 { left: 79.93%; top: 37.74%; }


/* --- Mobile Visual Layout --- */
.mobile-roadmap {
  display: none;
  position: relative;
  width: 100%;
  /* Approx aspect ratio based on typical mobile screen flow or the image provided */
  aspect-ratio: 375 / 600;
  margin: 0 auto;
  min-height: 600px;
}

.mobile-svg-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

.mobile-svg-container svg {
  width: 100%;
  height: 100%;
}

.mobile-step-visual {
  position: absolute;
  z-index: 10;
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 120px;
  transform: translateX(-50%);
}

.mobile-step-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.mobile-step-content .step-icon {
  width: 60px;
  height: 60px;
  margin-bottom: 0.5rem;
}

.mobile-step-content .step-icon svg {
  width: 100%;
  height: 100%;
}

.mobile-step-content h3 {
  font-size: 0.875rem;
  font-weight: 700;
  color: #2563eb;
  margin: 0;
  line-height: 1.3;
}

/* Mobile Line & Dot */
.mobile-step-line {
  width: 2px;
  height: 45px; /* Adjust length as needed */
  background-color: #BAE9F2;
  margin: 0 auto;
}

@media (max-width: 1440px) {
  .step-line {
    height: 120px;
  }

  .roadmap-title {
    font-size: 2.5rem;
  }
}
.mobile-road-dot {
  width: 10px;
  height: 10px;
  background-color: #fff;
  border: 2px solid #2563eb;
  border-radius: 50%;
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.5);
  margin: 0 auto; /* Center naturally in flex column */
}

/*
   Mobile "Position" Logic using Flex Order
   .above means content is logically "above" the path (visually top).
   So order: Content -> Line -> Dot
   .below means content is "below" the path.
   So order: Dot -> Line -> Content
*/

.mobile-step-visual.above {
  flex-direction: column;
}
.mobile-step-visual.above .mobile-step-content { order: 1; }
.mobile-step-visual.above .mobile-step-line { order: 2; }
.mobile-step-visual.above .mobile-road-dot { order: 3; }

.mobile-step-visual.below {
  flex-direction: column;
}
.mobile-step-visual.below .mobile-road-dot { order: 1; margin-bottom: -2px; z-index: 10; }
.mobile-step-visual.below .mobile-step-line { order: 2; margin-top: -2px; }
.mobile-step-visual.below .mobile-step-content { order: 3; }

/* Mobile Animations */

/* 1. Reveal SVG Path */
.mobile-svg-container svg path {
  /* Hide initially */
  clip-path: inset(0 100% 0 0); /* Reveals from Left to Right - or adjust based on path direction?
     The path goes Bottom-Left to Top-Right.
     Inset(0 0 100% 0) would be Top-to-Bottom.
     Inset(100% 0 0 0) would be Bottom-to-Top.
   */
   /* Let's try simple opacity for now, or stroke-dashoffset if stroke length known.
      Easiest reveal for jagged path is clip-path bottom-up. */
   clip-path: inset(100% 0 0 0);
   transition: clip-path 2s linear;
}

.recruitment-roadmap.in-view .mobile-svg-container svg path {
  animation: revealMobilePath 2s linear forwards;
}

@keyframes revealMobilePath {
  to { clip-path: inset(0 0 0 0); }
}

/* 2. Animate Steps (Sprouting from path) */

/* Ensure container is visible so children can animate independently */
.mobile-step-visual {
  opacity: 1;
  transform: translateX(-50%); /* Maintain centering */
}

/* Hide children initially */
.mobile-step-visual .mobile-step-content,
.mobile-step-visual .mobile-step-line,
.mobile-step-visual .mobile-road-dot {
  opacity: 0;
}

/* Dot Animation: Pop In */
.recruitment-roadmap.in-view .mobile-road-dot {
  animation: popInDot 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes popInDot {
  from { opacity: 0; transform: scale(0); }
  to { opacity: 1; transform: scale(1); }
}

/* Line Animation: Grow Out */
.recruitment-roadmap.in-view .mobile-step-line {
  animation: growMobileLine 0.5s ease-out forwards;
}

@keyframes growMobileLine {
  from { opacity: 1; transform: scaleY(0); }
  to { opacity: 1; transform: scaleY(1); }
}

/* Directional Origins for Lines (Grow from Dot/Path) */
.mobile-step-visual.above .mobile-step-line {
  transform-origin: bottom;
}
.mobile-step-visual.below .mobile-step-line {
  transform-origin: top;
}

/* Content Animation: Slide Out from Line */
.recruitment-roadmap.in-view .mobile-step-content {
  animation: slideContentAppear 0.5s ease-out forwards;
}

/* Content Animation Directions */
/* .above: Content is top. Slide UP from bottom (closer to line). */
.mobile-step-visual.above .mobile-step-content {
  transform: translateY(20px);
}
/* .below: Content is bottom. Slide DOWN from top (closer to line). */
.mobile-step-visual.below .mobile-step-content {
  transform: translateY(-20px);
}

@keyframes slideContentAppear {
  to { opacity: 1; transform: translateY(0); }
}

/* 4. Sequential Delays (Staggered Children) */
/* Sequence: Dot (0s) -> Line (+0.1s) -> Content (+0.2s) */
/* Base delays for each step S1..S5 */

/* S1 */
.recruitment-roadmap.in-view .s1 .mobile-road-dot { animation-delay: 0.2s; }
.recruitment-roadmap.in-view .s1 .mobile-step-line { animation-delay: 0.3s; }
.recruitment-roadmap.in-view .s1 .mobile-step-content { animation-delay: 0.5s; }

/* S2 */
.recruitment-roadmap.in-view .s2 .mobile-road-dot { animation-delay: 0.6s; }
.recruitment-roadmap.in-view .s2 .mobile-step-line { animation-delay: 0.7s; }
.recruitment-roadmap.in-view .s2 .mobile-step-content { animation-delay: 0.9s; }

/* S3 */
.recruitment-roadmap.in-view .s3 .mobile-road-dot { animation-delay: 1.0s; }
.recruitment-roadmap.in-view .s3 .mobile-step-line { animation-delay: 1.1s; }
.recruitment-roadmap.in-view .s3 .mobile-step-content { animation-delay: 1.3s; }

/* S4 */
.recruitment-roadmap.in-view .s4 .mobile-road-dot { animation-delay: 1.4s; }
.recruitment-roadmap.in-view .s4 .mobile-step-line { animation-delay: 1.5s; }
.recruitment-roadmap.in-view .s4 .mobile-step-content { animation-delay: 1.7s; }

/* S5 */
.recruitment-roadmap.in-view .s5 .mobile-road-dot { animation-delay: 1.8s; }
.recruitment-roadmap.in-view .s5 .mobile-step-line { animation-delay: 1.9s; }
.recruitment-roadmap.in-view .s5 .mobile-step-content { animation-delay: 2.1s; }



/* Adjust specific steps if needed */
.mobile-roadmap .s1 { left: 15%; top: 43%; }
.mobile-roadmap .s2 { left: 35%; top: 62%; } /* Shifted up slightly */
.mobile-roadmap .s3 { left: 53%; top: 21%; }
.mobile-roadmap .s4 { left: 71%; top: 41%; }
.mobile-roadmap .s5 { left: 85%; top: 6%; }



/* --- Responsive Breakpoint --- */
@media (max-width: 768px) {
  .desktop-roadmap {
    display: none;
  }
  .mobile-roadmap {
    display: block;
  }

  .roadmap-title {
    font-size: 2.5rem;
    padding: 0 1rem;
    text-align: center;
  }
}

@media (max-width: 768px) {
  .roadmap-title {
    font-size: 2rem;
    text-align: left;
    margin-bottom: -2rem;
    line-height: 1.4;
  }

  .recruitment-roadmap {
    padding: 2rem 0rem 1rem;
  }
}

