---
import "../styles/inspiration.css";

const testimonials = [
  {
    name: "Anh Nguyễn Văn Tình",
    role: "Android Developer",
    image: "/images/inspiration/van_tinh.png",
    quote:
      "Điều tôi trân trọng nhất khi nhìn lại hành trình tại Eco Mobile, trước hết là lòng biết ơn dành cho anh Tường - Giám đốc Công ty - người đã gieo nền móng xây dựng môi trường làm việc đầy tử tế và minh bạch. Từ đó, tôi được đồng hành cùng những con người lạc quan, tích cực, luôn nỗ lực mỗi ngày và không ngại khó khăn tiến về phía trước. Tại đây, tôi được học, được thử thách, được vấp ngã và được nâng đỡ để trưởng thành. 5 năm tại Eco Mobile không chỉ giúp tôi phát triển về kỹ năng, mà còn trong nhận thức, tư duy và niềm tin vào chính con đường mình đang đi.",
  },
  {
    name: "Bạn Mỹ Hạnh",
    role: "Product Designer",
    image: "/images/inspiration/my_hanh.png",
    quote:
      "Mình bắt đầu hành trình làm Product Designer tại Eco Mobile từ vị trí “non nớt” nhất là Intern. Vậy mà chỉ sau khoảng 2 năm, mình đã đóng gói cho bản thân được rất nhiều kinh nghiệm đáng giá, khi nhìn lại mới thấy mình đã đi xa hơn mình tưởng. Ngay từ những ngày đầu tiên, mình đã có sự dẫn dắt tận tình của mentor, có sự đồng hành, hỗ trợ từ ekip, có được những lời feedback chân thành từ mọi người xung quanh. Quan trọng hơn cả là mình có được cơ hội làm thật, thử thật, được nhìn thấy những tác động của mình đối với một sản phẩm thực tế. Tất cả những điều đó đã giúp mình bước nhanh hơn, vững vàng hơn trong hành trình này.",
  },
  {
    name: "Anh Nguyễn Văn Tú",
    role: "Project Manager",
    image: "/images/inspiration/van_tu.png",
    quote:
      "Với tôi, Eco giống như một người bố có đạo đức và nghiêm khắc. Bố tin con, tôn trọng con và trao quyền cho con được tự quyết, nhưng không nuông chiều. Bố cho con nhìn thẳng vào sự thật, kể cả những con số hay kết quả chưa tốt, để con tự chịu trách nhiệm với lựa chọn của mình. Bố cho con thời gian để học, để sai và để trưởng thành, nhưng khi cần thì yêu cầu kỷ luật và kết quả rõ ràng. Và dù mỗi đứa con có cá tính khác nhau, bố vẫn luôn nhắc rằng tự do cá nhân phải đi cùng trách nhiệm với gia đình, vì mục tiêu chung cuối cùng không chỉ là thành công, mà là hạnh phúc.",
  },
  {
    name: "Bạn Phương Linh",
    role: "Product Marketing",
    image: "/images/inspiration/phuong_linh.png",
    quote:
      "Mình không cảm thấy cô đơn khi làm việc tại Eco Mobile là do văn hoá và môi trường xanh ngọc mà công ty xây dựng. Ở Eco, mọi người khá cởi mở, nên việc hoà nhập cũng dễ dàng và nhanh hơn. Quan trọng hơn, cả ekip đều cùng hướng về sản phẩm và nỗ lực vì mục tiêu chung. Khi mọi người cùng hướng về một mục tiêu, cùng đi một con đường, thì sẽ không ai phải cô đơn cả. Nên không chỉ công việc, mà cả cuộc sống hàng ngày ở Eco cũng rất khó để cảm thấy cô đơn.",
  },
  {
    name: "Bạn Hà Trang",
    role: "Product Marketing",
    image: "/images/inspiration/ha_trang.png",
    quote:
      "Trong suốt quãng thời gian từ thực tập, thử việc đến khi chính thức trở thành một thành viên của đại gia đình Eco Mobile, mình thật sự may mắn khi đã luôn nhận được sự hỗ trợ và đồng hành từ các anh chị em đồng nghiệp. Mọi người không chỉ sẵn sàng chia sẻ kiến thức, kinh nghiệm mà còn luôn tạo cảm giác thoải mái để mình tự tin học hỏi và phát triển. Đặc biệt, mình muốn gửi lời cảm ơn chân thành đến những mentor – những người đã kiên nhẫn hướng dẫn, góp ý thẳng thắn và luôn tin tưởng mình. Sự tận tâm của mọi người là động lực rất lớn để mình cố gắng mỗi ngày và gắn bó lâu dài hơn với công ty!",
  },
];
---

<section class="inspiration-section">
  <div class="inspiration-container">
    <h2 class="section-title">CHIA SẺ CẢM HỨNG</h2>

    <div class="inspiration-wrapper">
      <div class="inspiration-track">
        <!-- Path Line -->
        <svg
          class="inspiration-curve"
          width="1200"
          height="250"
          viewBox="0 0 1200 250"
          fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M0 80 Q 600 220 1200 80"
            stroke="#E5E7EB"
            stroke-width="2"
            stroke-dasharray="8 8"
            stroke-linecap="round"></path>
        </svg>

        <!-- Avatars -->
        <div class="inspiration-avatars">
          {
            testimonials.map((item, index) => (
              <div class="avatar-item" data-index={index}>
                <img src={item.image} alt={item.name} />
              </div>
            ))
          }
        </div>
      </div>

      <div class="inspiration-card-wrapper">
        <div class="inspiration-card">
          <div class="content-track">
            {
              testimonials.map((item, index) => (
                <div class="content-item" data-index={index}>
                  <div class="mobile-avatar">
                    <img src={item.image} alt={item.name} />
                  </div>
                  <h3 class="person-name">{item.name}</h3>
                  <p class="person-role">{item.role}</p>
                  <p class="person-quote">{item.quote}</p>
                </div>
              ))
            }
          </div>

          <!-- Navigation Buttons embedded in the card wrapper visual flow -->
          <button class="nav-btn prev-btn" id="prevBtn">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M15 19L8 12L15 5"
                stroke="white"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </svg>
          </button>

          <button class="nav-btn next-btn" id="nextBtn">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M9 5L16 12L9 19"
                stroke="white"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const avatars = document.querySelectorAll(".avatar-item");
  const contents = document.querySelectorAll(".content-item");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  let currentIndex = 0;
  const totalItems = avatars.length;

  function updateCarousel() {
    // Button visibility (Linear)
    if (currentIndex === 0) {
      if (prevBtn) prevBtn.classList.add("hidden");
    } else {
      if (prevBtn) prevBtn.classList.remove("hidden");
    }

    if (currentIndex === totalItems - 1) {
      if (nextBtn) nextBtn.classList.add("hidden");
    } else {
      if (nextBtn) nextBtn.classList.remove("hidden");
    }

    avatars.forEach((avatar, index) => {
      avatar.classList.remove(
        "active",
        "prev",
        "next",
        "prev-2",
        "next-2",
        "hidden-left",
        "hidden-right"
      );

      // Simple diff (Linear)
      let diff = index - currentIndex;

      if (diff === 0) {
        avatar.classList.add("active");
      } else if (diff === -1) {
        avatar.classList.add("prev");
      } else if (diff === 1) {
        avatar.classList.add("next");
      } else if (diff === -2) {
        avatar.classList.add("prev-2");
      } else if (diff === 2) {
        avatar.classList.add("next-2");
      } else if (diff < -2) {
        avatar.classList.add("hidden-left");
      } else {
        avatar.classList.add("hidden-right");
      }
    });

    contents.forEach((content, index) => {
      content.classList.remove("active");
      if (index === currentIndex) {
        content.classList.add("active");
      }
    });
  }

  if (prevBtn && nextBtn) {
    prevBtn.addEventListener("click", () => {
      if (currentIndex > 0) {
        currentIndex--;
        updateCarousel();
      }
    });

    nextBtn.addEventListener("click", () => {
      if (currentIndex < totalItems - 1) {
        currentIndex++;
        updateCarousel();
      }
    });
  }

  // Click on avatar to switch
  avatars.forEach((avatar, index) => {
    avatar.addEventListener("click", () => {
      currentIndex = index;
      updateCarousel();
    });
  });

  // Initialize
  updateCarousel();
</script>
